@import "tailwindcss";

/* Enable class-based dark mode for Tailwind v4 */
@variant dark (&:where(.dark, .dark *));

/* Define Tailwind v4 custom color utilities using separate token names */
@theme {
  /* Map Tailwind utility names to runtime CSS variables */
  --color-bg: rgb(var(--app-bg) / <alpha-value>);
  --color-bg-alt: rgb(var(--app-bg-alt) / <alpha-value>);
  --color-default: rgb(var(--app-text) / <alpha-value>);
  --color-muted: rgb(var(--app-text-muted) / <alpha-value>);
  --color-border: rgb(var(--app-border) / <alpha-value>);
  --color-accent: rgb(var(--app-accent) / <alpha-value>);
  --color-accent-hover: rgb(var(--app-accent-hover) / <alpha-value>);
  --color-accent-text: rgb(var(--app-accent-text) / <alpha-value>);
  --color-tag-form: rgb(var(--app-tag-form) / <alpha-value>);
  --color-tag-form-text: rgb(var(--app-tag-form-text) / <alpha-value>);
  --color-tag-meter: rgb(var(--app-tag-meter) / <alpha-value>);
  --color-tag-meter-text: rgb(var(--app-tag-meter-text) / <alpha-value>);
  --color-tag-device: rgb(var(--app-tag-device) / <alpha-value>);
  --color-tag-device-text: rgb(var(--app-tag-device-text) / <alpha-value>);
  
  /* Radius */
  --radius-sm: 0.125rem;
  --radius-md: 0.25rem;
  --radius-lg: 0.375rem;
  --radius-xl: 0.5rem;
}

/* Base Styles */
body {
  font-family: 'Source Code Pro', monospace;
  font-size: 18px;
  background-color: rgb(var(--app-bg));
  color: rgb(var(--app-text));
}

html {
  font-size: 18px;
  background-color: rgb(var(--app-bg));
}

/* Mobile font size reduction */
@media (max-width: 640px) {
  html {
    font-size: 15px;
  }
  body {
    font-size: 15px;
  }
}

/* 
   THEME PHILOSOPHY: 3 Shades + Creative Highlight
   Shade 1: Background (Deepest/Lightest Base)
   Shade 2: Surface (Interactive/Card Layer)
   Shade 3: Border (Structural Definition)
   Highlight: Vibrant Accent
*/

/* --- THEME: Dark (Midnight Scholar) - Default --- */
/* Identity: Light Blue (Sky) */
:root {
  color-scheme: dark;
  --app-bg: 10 10 10; /* Shade 1: Absolute Black base */
  --app-bg-alt: 28 28 28; /* Shade 2: Lifted Charcoal surface */
  --app-border: 45 45 45; /* Shade 3: Subtle structure */
  --app-scrollbar: 35 35 35; /* Dark scrollbar for dark mode */

  --app-text: 237 237 237;
  --app-text-muted: 115 115 115;
  
  /* Highlight: Sky 400 */
  --app-accent: 56 189 248;
  --app-accent-hover: 14 165 233;
  --app-accent-text: 15 23 42; /* Dark Navy for Contrast */
  
  /* Muted Tags */
  --app-tag-form: 115 115 115;
  --app-tag-form-text: 237 237 237;
  --app-tag-meter: 115 115 115;
  --app-tag-meter-text: 237 237 237;
  --app-tag-device: 115 115 115;
  --app-tag-device-text: 237 237 237;

  /* Journal Font Customization */
  --journal-font-family: 'Source Code Pro', 'Menlo', 'Monaco', 'Courier New', monospace;
  --journal-font-size: 16px;
}

/* --- THEME: Light (Canvas Theory) - Default --- */
/* Identity: Light Blue (Sky) */
.light { 
  color-scheme: light;
  --app-bg: 252 252 252; /* Shade 1: Pure Canvas */
  --app-bg-alt: 243 244 246; /* Shade 2: Cool Gray Surface */
  --app-border: 229 231 235; /* Shade 3: Structural Gray */
  --app-scrollbar: 200 200 200; /* Light scrollbar for light mode */

  --app-text: 17 24 39;
  --app-text-muted: 107 114 128;
  
  /* Highlight: Sky 600 */
  --app-accent: 2 132 199;
  --app-accent-hover: 3 105 161;
  --app-accent-text: 255 255 255;
  
  /* Muted Tags */
  --app-tag-form: 107 114 128;
  --app-tag-form-text: 17 24 39;
  --app-tag-meter: 107 114 128;
  --app-tag-meter-text: 17 24 39;
  --app-tag-device: 107 114 128;
  --app-tag-device-text: 17 24 39;
}

/* --- THEME: Paper (Ancient Manuscript) - Premium --- */
/* Identity: Warm Amber/Rust */
.light.theme-paper,
html.light.theme-paper {
  --app-bg: 253 250 245; /* Shade 1: Cream */
  --app-bg-alt: 244 240 232; /* Shade 2: Parchment Surface */
  --app-border: 226 218 205; /* Shade 3: Aged Edge */
  --app-scrollbar: 200 190 175; /* Parchment scrollbar for light paper */
  
  --app-text: 67 52 34; /* Deep Brown */
  --app-text-muted: 156 143 124;
  
  /* Highlight: Rich Rust (Orange 700) */
  --app-accent: 194 65 12;
  --app-accent-hover: 154 52 18;
  --app-accent-text: 255 255 255;
}

.dark.theme-paper {
  --app-bg: 30 25 20; /* Shade 1: Dark Leather */
  --app-bg-alt: 45 40 35; /* Shade 2: Warm Stone Surface */
  --app-border: 75 65 55; /* Shade 3: Bronze Edge */
  --app-scrollbar: 55 50 45; /* Dark scrollbar for dark paper */
  
  --app-text: 235 230 225;
  --app-text-muted: 170 160 150;
  
  /* Highlight: Bright Gold (Amber 500) */
  --app-accent: 245 158 11;
  --app-accent-hover: 251 191 36;
  --app-accent-text: 30 25 20; /* Dark Brown Text for Contrast on Gold */
}

/* --- THEME: Slate (Technical Blueprint) - Premium --- */
/* Identity: Technical Cyan */
.light.theme-slate {
  --app-bg: 248 250 252; /* Shade 1: Ice White */
  --app-bg-alt: 241 245 249; /* Shade 2: Mist Surface */
  --app-border: 203 213 225; /* Shade 3: Frost Border */
  --app-scrollbar: 180 190 200; /* Slate scrollbar for light slate */
  
  --app-text: 51 65 85; /* Slate 700 */
  --app-text-muted: 100 116 139;
  
  /* Highlight: Cyan 700 */
  --app-accent: 14 116 144;
  --app-accent-hover: 21 94 117;
  --app-accent-text: 255 255 255;
}

.dark.theme-slate {
  --app-bg: 15 23 42; /* Shade 1: Deep Ocean */
  --app-bg-alt: 30 41 59; /* Shade 2: Midnight Surface */
  --app-border: 51 65 85; /* Shade 3: Steel Edge */
  --app-scrollbar: 40 50 65; /* Dark scrollbar for dark slate */
  
  --app-text: 226 232 240; /* Slate 200 */
  --app-text-muted: 148 163 184;
  
  /* Highlight: Neon Cyan (Cyan 400) */
  --app-accent: 34 211 238;
  --app-accent-hover: 103 232 249;
  --app-accent-text: 15 23 42; /* Dark Navy Text for Contrast on Cyan */
}

/* Custom Utilities */
.bg-bg { background-color: rgb(var(--app-bg)); }
.bg-bg-alt { background-color: rgb(var(--app-bg-alt)); }
.text-default { color: rgb(var(--app-text)); }
.text-muted { color: rgb(var(--app-text-muted)); }
.border-default { border-color: rgb(var(--app-border)); }
.bg-accent { background-color: rgb(var(--app-accent)); }
.text-accent { color: rgb(var(--app-accent)); }
.bg-accent-hover { background-color: rgb(var(--app-accent-hover)); }
.text-accent-text { color: rgb(var(--app-accent-text)); }

/* Journal Font Utility */
.journal-font {
  font-family: var(--journal-font-family);
  font-size: var(--journal-font-size);
  line-height: 1.6;
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in {
  animation: fadeIn 0.4s ease-out forwards;
}

@keyframes fadeInFast {
  from { opacity: 0; }
  to { opacity: 1; }
}
.animate-fade-in-fast {
  animation: fadeInFast 0.3s ease-out forwards;
}

@keyframes modalIn {
  from { opacity: 0; transform: translateY(20px) scale(0.95); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}
.animate-modal-in {
  animation: modalIn 0.3s ease-out forwards;
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(100%); }
  to { opacity: 1; transform: translateX(0); }
}
.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out forwards;
}

@media (prefers-reduced-motion: reduce) {
  .animate-fade-in,
  .animate-fade-in-fast,
  .animate-modal-in,
  .animate-slide-in-right {
    animation: none !important;
  }
}

/* Custom Scrollbar - Sleek & Minimal */
html,
body,
* {
  scrollbar-width: thin;
  scrollbar-color: rgb(var(--app-scrollbar)) transparent;
}

/* Webkit Scrollbar (Chrome, Safari, Edge) */
html::-webkit-scrollbar,
body::-webkit-scrollbar,
*::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

html::-webkit-scrollbar-track,
body::-webkit-scrollbar-track,
*::-webkit-scrollbar-track {
  background: transparent;
}

html::-webkit-scrollbar-thumb,
body::-webkit-scrollbar-thumb,
*::-webkit-scrollbar-thumb {
  background: rgb(var(--app-scrollbar)) !important;
  border-radius: 3px;
  transition: background 0.2s ease;
}

html::-webkit-scrollbar-thumb:hover,
body::-webkit-scrollbar-thumb:hover,
*::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--app-text-muted)) !important;
}

html::-webkit-scrollbar-corner,
body::-webkit-scrollbar-corner,
*::-webkit-scrollbar-corner {
  background: transparent;
}

/* ============================================
   ELEGANT NOTES FEATURES
   ============================================ */

/* Markdown Preview Styles */
.markdown-preview {
  font-family: 'Source Serif Pro', 'Georgia', serif;
  line-height: 1.75;
}

.markdown-preview h1,
.markdown-preview h2,
.markdown-preview h3,
.markdown-preview h4,
.markdown-preview h5,
.markdown-preview h6 {
  font-family: 'Source Code Pro', monospace;
  font-weight: 700;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
  color: rgb(var(--app-text));
}

.markdown-preview h1 { font-size: 1.875rem; }
.markdown-preview h2 { font-size: 1.5rem; }
.markdown-preview h3 { font-size: 1.25rem; }
.markdown-preview h4 { font-size: 1.125rem; }

.markdown-preview p {
  margin-bottom: 1em;
}

.markdown-preview a {
  color: rgb(var(--app-accent));
  text-decoration: underline;
  text-underline-offset: 2px;
}

.markdown-preview a:hover {
  opacity: 0.8;
}

.markdown-preview code {
  font-family: 'Source Code Pro', monospace;
  background-color: rgb(var(--app-bg-alt));
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
}

.markdown-preview pre {
  background-color: rgb(var(--app-bg-alt));
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 1em 0;
}

.markdown-preview pre code {
  background-color: transparent;
  padding: 0;
}

.markdown-preview blockquote {
  border-left: 3px solid rgb(var(--app-accent));
  margin: 1em 0;
  padding-left: 1rem;
  color: rgb(var(--app-text-muted));
  font-style: italic;
}

.markdown-preview ul,
.markdown-preview ol {
  padding-left: 1.5rem;
  margin-bottom: 1em;
}

.markdown-preview li {
  margin-bottom: 0.375em;
}

.markdown-preview ul {
  list-style-type: disc;
}

.markdown-preview ol {
  list-style-type: decimal;
}

.markdown-preview ul ul,
.markdown-preview ol ul {
  list-style-type: circle;
}

.markdown-preview hr {
  border: none;
  border-top: 1px solid rgb(var(--app-border));
  margin: 2em 0;
}

.markdown-preview img {
  max-width: 100%;
  border-radius: 0.5rem;
}

.markdown-preview table {
  width: 100%;
  border-collapse: collapse;
  margin: 1em 0;
}

.markdown-preview th,
.markdown-preview td {
  border: 1px solid rgb(var(--app-border));
  padding: 0.5rem 0.75rem;
  text-align: left;
}

.markdown-preview th {
  background-color: rgb(var(--app-bg-alt));
  font-weight: 600;
}

/* Checkbox styling in markdown */
.markdown-preview input[type="checkbox"] {
  margin-right: 0.5rem;
  accent-color: rgb(var(--app-accent));
}

/* Slash Menu Animation */
@keyframes slideUpFade {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.slash-menu {
  animation: slideUpFade 0.15s ease-out;
}

/* Focus ring styles */
.focus-visible:focus {
  outline: 2px solid rgb(var(--app-accent));
  outline-offset: 2px;
}

/* Goal progress bar animation */
@keyframes goalPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.goal-reached {
  animation: goalPulse 2s ease-in-out infinite;
}

/* Tag Highlight in Content */
.tag-highlight {
  color: rgb(var(--app-accent));
  font-weight: 500;
}

/* Tag folder animation */
@keyframes folderExpand {
  from {
    opacity: 0;
    max-height: 0;
  }
  to {
    opacity: 1;
    max-height: 500px;
  }
}

.tag-folder-content {
  animation: folderExpand 0.2s ease-out;
}
